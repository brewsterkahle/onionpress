# Listen on port 81 for Tor connections with PROXY protocol
Listen 81

<VirtualHost *:81>
    RemoteIPProxyProtocol On
    DocumentRoot /var/www/html

    # Tor forwards .onion:80 → wordpress:81.  Tell Apache the real
    # external port is 80 so redirects (e.g. /wp-admin → /wp-admin/)
    # don't include ":81".
    UseCanonicalName Off
    ServerName localhost:80

    # Use the same config as the default WordPress VirtualHost
    <Directory /var/www/html>
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>
